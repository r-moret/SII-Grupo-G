CREATE TABLE ENCUESTA (FECHAENVIO DATE NOT NULL, EXPEDIENTE_NUMEXPEDIENTE INTEGER NOT NULL, PRIMARY KEY (FECHAENVIO))
CREATE TABLE TITULACION (CODIGO INTEGER NOT NULL, CREDITOS INTEGER NOT NULL, NOMBRE VARCHAR(255) NOT NULL, PRIMARY KEY (CODIGO))
CREATE TABLE CENTRO (ID INTEGER NOT NULL, DIRECCION VARCHAR(255) NOT NULL, NOMBRE VARCHAR(255) NOT NULL UNIQUE, TLFCONSEJERIA INTEGER, PRIMARY KEY (ID))
CREATE TABLE ALUMNO (ID INTEGER NOT NULL, DNI VARCHAR(255) NOT NULL UNIQUE, EMAILINSTITUCIONAL VARCHAR(255) NOT NULL, EMAILPERSONAL VARCHAR(255), MOVIL INTEGER, NOMBRECOMPLETO VARCHAR(255) NOT NULL, TELEFONO INTEGER, PRIMARY KEY (ID))
CREATE TABLE MATRICULA (CURSOACADEMICO VARCHAR(255) NOT NULL, ESTADO TINYINT(1) default 0 NOT NULL, FECHAMATRICULA DATE NOT NULL, LISTADOASIGNATURAS VARCHAR(255), NUEVOINGRESO TINYINT(1) default 0, NUMARCHIVO INTEGER NOT NULL, TURNOPREFERENTE VARCHAR(255) NOT NULL, EXPEDIENTE_NUMEXPEDIENTE INTEGER NOT NULL, PRIMARY KEY (CURSOACADEMICO, EXPEDIENTE_NUMEXPEDIENTE))
CREATE TABLE CLASE (DIA VARCHAR(255) NOT NULL, HORAINICIO DATE NOT NULL, HORAFIN DATE, ASIGNATURA_REFERENCIA INTEGER NOT NULL, GRUPO_ID VARCHAR(255) NOT NULL, PRIMARY KEY (DIA, HORAINICIO, GRUPO_ID))
CREATE TABLE GRUPO (ID VARCHAR(255) NOT NULL, ASIGNAR TINYINT(1) default 0, CURSO INTEGER NOT NULL, INGLES TINYINT(1) default 0 NOT NULL, LETRA VARCHAR(255) NOT NULL, PLAZAS INTEGER, TURNO VARCHAR(255) NOT NULL, VISIBLE TINYINT(1) default 0, GRUPOCOMUN_ID VARCHAR(255), TITULACION_CODIGO INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE ASIGNATURA (REFERENCIA INTEGER NOT NULL, DTYPE VARCHAR(31), CARACTER VARCHAR(255), CODIGO INTEGER NOT NULL, CREDITOS INTEGER NOT NULL, CUATRIMESTRE INTEGER, CURSO INTEGER, DURACION INTEGER, IDIOMA VARCHAR(255), NOMBRE VARCHAR(255) NOT NULL, OFERTADA TINYINT(1) default 0 NOT NULL, TITULACION_CODIGO INTEGER NOT NULL, PRIMARY KEY (REFERENCIA))
CREATE TABLE OPTATIVA (REFERENCIA INTEGER NOT NULL, MENCION VARCHAR(255), PLAZAS INTEGER NOT NULL, PRIMARY KEY (REFERENCIA))
CREATE TABLE EXPEDIENTE (NUMEXPEDIENTE INTEGER NOT NULL, ACTIVO TINYINT(1) default 0, NOTAMEDIAPROVISIONAL FLOAT, ALUMNO_ID INTEGER NOT NULL, TITULACION_CODIGO INTEGER NOT NULL, PRIMARY KEY (NUMEXPEDIENTE))
CREATE TABLE GRUPOSPORASIGNATURA (CURSOACADEMICO VARCHAR(255) NOT NULL, OFERTADA TINYINT(1) default 0, ASIGNATURA_REFERENCIA INTEGER NOT NULL, GRUPO_ID VARCHAR(255) NOT NULL, PRIMARY KEY (CURSOACADEMICO, ASIGNATURA_REFERENCIA, GRUPO_ID))
CREATE TABLE DATOSALUMNADO (DNI VARCHAR(255) NOT NULL, APELLIDO1 VARCHAR(255), APELLIDO2 VARCHAR(255), CPNOTIFICACION INTEGER, CREDITOSCF INTEGER, CREDITOSFB INTEGER, CREDITOSOB INTEGER, CREDITOSOP INTEGER, CREDITOSPE INTEGER, CREDITOSSUPERADOS INTEGER, CREDITOSTF INTEGER, DIRECCIONNOTIFICACION VARCHAR(255), EMAILINSTITUCIONAL VARCHAR(255), EMAILPERSONAL VARCHAR(255), FECHAMATRICULA DATE, GRUPOSASIGNADOS VARCHAR(255), LOCALIDADNOTIFICACION VARCHAR(255), MOVIL INTEGER, NOMBRE VARCHAR(255), NOTAMEDIA INTEGER, NUMEXPEDIENTE INTEGER, PROVINCIANOTIFICACION VARCHAR(255), TELEFONO INTEGER, TURNOPREFERENTE VARCHAR(255), PRIMARY KEY (DNI))
CREATE TABLE ASIGNATURASPORMATRICULAS (ASIGNATURA_REFERENCIA INTEGER NOT NULL, GRUPO_ID VARCHAR(255), EXPEDIENTE_NUMEXPEDIENTE INTEGER NOT NULL, CURSOACADEMICO VARCHAR(255) NOT NULL, PRIMARY KEY (ASIGNATURA_REFERENCIA, EXPEDIENTE_NUMEXPEDIENTE, CURSOACADEMICO))
CREATE TABLE ENCUESTA_GRUPOSPORASIGNATURA (encuesta_FECHAENVIO DATE NOT NULL, CURSOACADEMICO VARCHAR(255) NOT NULL, ASIGNATURA_REFERENCIA INTEGER NOT NULL, GRUPO_ID VARCHAR(255) NOT NULL, PRIMARY KEY (encuesta_FECHAENVIO, CURSOACADEMICO, ASIGNATURA_REFERENCIA, GRUPO_ID))
CREATE TABLE TITULACION_CENTRO (titulaciones_CODIGO INTEGER NOT NULL, centros_ID INTEGER NOT NULL, PRIMARY KEY (titulaciones_CODIGO, centros_ID))
ALTER TABLE GRUPO ADD CONSTRAINT UNQ_GRUPO_0 UNIQUE (Curso, Letra)
ALTER TABLE ENCUESTA ADD CONSTRAINT FK_ENCUESTA_EXPEDIENTE_NUMEXPEDIENTE FOREIGN KEY (EXPEDIENTE_NUMEXPEDIENTE) REFERENCES EXPEDIENTE (NUMEXPEDIENTE)
ALTER TABLE MATRICULA ADD CONSTRAINT FK_MATRICULA_EXPEDIENTE_NUMEXPEDIENTE FOREIGN KEY (EXPEDIENTE_NUMEXPEDIENTE) REFERENCES EXPEDIENTE (NUMEXPEDIENTE)
ALTER TABLE CLASE ADD CONSTRAINT FK_CLASE_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE CLASE ADD CONSTRAINT FK_CLASE_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_GRUPOCOMUN_ID FOREIGN KEY (GRUPOCOMUN_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_TITULACION_CODIGO FOREIGN KEY (TITULACION_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE ASIGNATURA ADD CONSTRAINT FK_ASIGNATURA_TITULACION_CODIGO FOREIGN KEY (TITULACION_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE OPTATIVA ADD CONSTRAINT FK_OPTATIVA_REFERENCIA FOREIGN KEY (REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE EXPEDIENTE ADD CONSTRAINT FK_EXPEDIENTE_TITULACION_CODIGO FOREIGN KEY (TITULACION_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE EXPEDIENTE ADD CONSTRAINT FK_EXPEDIENTE_ALUMNO_ID FOREIGN KEY (ALUMNO_ID) REFERENCES ALUMNO (ID)
ALTER TABLE GRUPOSPORASIGNATURA ADD CONSTRAINT FK_GRUPOSPORASIGNATURA_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPOSPORASIGNATURA ADD CONSTRAINT FK_GRUPOSPORASIGNATURA_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE ASIGNATURASPORMATRICULAS ADD CONSTRAINT FK_ASIGNATURASPORMATRICULAS_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE ASIGNATURASPORMATRICULAS ADD CONSTRAINT FK_ASIGNATURASPORMATRICULAS_CURSOACADEMICO FOREIGN KEY (CURSOACADEMICO, EXPEDIENTE_NUMEXPEDIENTE) REFERENCES MATRICULA (CURSOACADEMICO, EXPEDIENTE_NUMEXPEDIENTE)
ALTER TABLE ASIGNATURASPORMATRICULAS ADD CONSTRAINT FK_ASIGNATURASPORMATRICULAS_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE ENCUESTA_GRUPOSPORASIGNATURA ADD CONSTRAINT FK_ENCUESTA_GRUPOSPORASIGNATURA_CURSOACADEMICO FOREIGN KEY (CURSOACADEMICO, ASIGNATURA_REFERENCIA, GRUPO_ID) REFERENCES GRUPOSPORASIGNATURA (CURSOACADEMICO, ASIGNATURA_REFERENCIA, GRUPO_ID)
ALTER TABLE ENCUESTA_GRUPOSPORASIGNATURA ADD CONSTRAINT ENCUESTA_GRUPOSPORASIGNATURA_encuesta_FECHAENVIO FOREIGN KEY (encuesta_FECHAENVIO) REFERENCES ENCUESTA (FECHAENVIO)
ALTER TABLE TITULACION_CENTRO ADD CONSTRAINT FK_TITULACION_CENTRO_titulaciones_CODIGO FOREIGN KEY (titulaciones_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE TITULACION_CENTRO ADD CONSTRAINT FK_TITULACION_CENTRO_centros_ID FOREIGN KEY (centros_ID) REFERENCES CENTRO (ID)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT DECIMAL(38), PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0)
